# :cloud: Creando una instancia EC2 en AWS :cloud:

## 1. Crear un par de llaves para SSH :old_key:
- Desde cualquier terminal con `ssh-keygen` disponible, generar un nuevo par de llaves para SSH.
- Utilizando `ssh-keygen` crear un par de llaves con las siguientes características:
    - Algoritmo: RSA
    - Bytes: 4096
    - Comentario: keys_lab01
- Las llaves deberán crearse en la carpeta por defecto y con el nombre por defecto (id_rsa).
- No se definirá un passphrase, es decir, este campo debe quedar vacío.
- Tomar nota de la ubicación de los archivos correspondientes a las llaves.

## 2. Creando un usuario nuevo en AWS :technologist:
- Creando el usuario
    - Loguearse en AWS con el Root user
    - Desde `Console Home` dirigirse a IAM.
    - Crear un usuario con las siguientes características:
        - Nombre: `lab_superuser`
        - Tipo: `IAM user`
        - Autogenerated password
        - Uncheck `Users must create a new password at next sign-in`
- Estableciendo permisos
    - Añadir políticas directamente, de forma que el usuario tenga acceso total a todos los servicios de AWS.
    - Anotar los datos de login y proceder a logearse con el usuario nuevo.

## 3. Creando una instancia de EC2 en AWS :desktop_computer:
- Utilizando un par de llaves generado mediante AWS
    - Dirigirse a EC2 y luego a `Key pairs`.
    - Crear una llave nueva con las siguientes características:
        - Nombre: `lab_key_aws`
        - Key pair type `RSA`
        - Private key file format: `pem`
    - Descargar la llave privada y tomar nota de la ubicación.
    - Crear una instancia de EC2 con las siguientes características:
        - Nombre: `ubuntu_aws`
        - Instance type: `t2.micro`
        - AMI: `Ubuntu 22.04` (free tier)
        - Key par name: `lab_key_aws`
        - Añadir grupo de seguridad que permita tráfico SSH desde `0.0.0.0/0`
    - Cuando la instancia termine de crearse, identificar la IP pública para conectarse mediante SSH.
    - Investigar cuál es el usuario por default para el AMI utilizada.
    - Conectarse mediante SSH la instancia creada.
- Utilizando un par de llaves personal
    - Dirigirse a EC2 y luego a `Key pairs`.
    - Importar la llave creada anteriormente (paso 1) con las siguientes características:
        - Name: `lab_key_personal`
        - Copiar el contenido del archivo .pub o directamente subir el archivo .pub correspondiente del par de llaves
    - Crear una instancia de EC2 con las siguientes características:
        - Nombre: `ubuntu_aws`
        - Instance type: `t2.micro`
        - AMI: `Amazon Linux 2023` (free tier)
        - Key par name: `lab_key_personal`
        - Añadir grupo de seguridad que permita tráfico SSH desde `0.0.0.0/0`
    - Cuando la instancia termine de crearse, identificar la IP pública para conectarse mediante SSH.
    - Investigar cuál es el usuario por default para el AMI utilizada.
    - Conectarse mediante SSH la instancia creada.

## 4. Utilizando AWS CLI desde las nuevas instancias :computer:
- Generando una llave de acceso para AWS
    - Desde IAM, dirigirse a usuarios y seleccionar el usuario actual.
    - Crear una llave para AWS CLI `Access Keys` con las siguientes características:
        - Use case: Command Line Interface.
    - Tomar nota de los valores de la llave de acceso
    - Conectarse mediante SSH a cada una de las instancias.
    - Investigar cómo instalar AWS CLI si no está instalado.
    - Investigar cuáles son las variables de entorno que deben exportarse para cada uno de los valores de la llave de acceso previamente creada.
    - Correr un comando sencillo con aws cli como `aws ec2 describe-instances`




